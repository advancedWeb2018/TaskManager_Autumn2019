@using MakeIt.WebUI.ViewModel;
@model List<TaskShowViewModel>
@{
    ViewBag.Title = "MakeIt";
}

    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-10">
                <h1 class="page-header">Dashboard</h1>
            </div>
            <div class="col-lg-2">
                <button type="button" onclick="location.href='@Url.Action("Create", "Task")'" class="page-header btn btn-success">Create new task</button>
            </div>
        </div>

        @if (Model != null)
        {
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel-body">
                        <div class="table-responsive">
                            <table id="projectTable" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Priority</th>
                                        <th>Due Date</th>
                                        <th>Project</th>
                                        <th>Title</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var task in Model)
                                    {
                                    <tr>
                                        @Html.Hidden(@task.Id.ToString())
                                        <td>@task.Priority</td>
                                        <td>@task.DueDate</td>
                                        <td>@task.Project</td>
                                        <td>
                                            @Html.ActionLink(@task.Title, "Edit", "Task",
                                            new MakeIt.WebUI.ViewModel.TaskShowViewModel
                                            {
                                                Id = task.Id,
                                                Title = task.Title,
                                                Description = task.Description,
                                                DueDate = task.DueDate,                                                
                                                Priority = task.Priority,
                                                Status = task.Status,
                                                Project = task.Project,
                                                AssignedUser = task.AssignedUser                                                
                                            },
                                            htmlAttributes: new { @class = "text-light bg-dark" })
                                        </td>                                       
                                        <td>@task.Status</td>
                                    </tr>
                                    }
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th>Priority</th>
                                        <th>Due Date</th>
                                        <th>Project</th>
                                        <th>Title</th>                                        
                                        <th>Status</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        }

        else
        {
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel-body">
                        You have not assigned tasks yet
                    </div>
                </div>
            </div>
        }

    </div>
